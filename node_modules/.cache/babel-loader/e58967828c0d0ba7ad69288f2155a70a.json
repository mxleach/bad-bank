{"ast":null,"code":"import _slicedToArray from\"/Users/maxleach/Documents/GitHub/bad-bank/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Card,UserContext}from'./context';import'./app.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Withdraw(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),withdraw=_useState2[0],setWithdraw=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),status=_useState4[0],setStatus=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var ctx=useContext(UserContext);var lastUser=ctx.users.length-1;var balance=parseInt(ctx.users[lastUser].balance);function validate(field,label){if(isNaN(withdraw)||withdraw===\" \"){setStatus('Error: '+label);setTimeout(function(){return setStatus('');},3000);return false;}if(withdraw<0){setStatus('Error: Negative Number');setTimeout(function(){return setStatus('');},3000);return false;}if(withdraw>balance){setStatus('Error: Insufficient Funds');setTimeout(function(){return setStatus('');},3000);return false;}return true;}function makeWithdrawal(){if(!validate(withdraw,'Number Required'))return;var newAmount=balance-parseInt(withdraw);var deductedFunds=\"\".concat(ctx.users[lastUser].name,\" withdrew: \").concat(withdraw);setShow(false);return ctx.users[lastUser].balance=newAmount,ctx.submissions.push(deductedFunds);}function clearForm(){setWithdraw(0);setShow(true);console.log(ctx);}return/*#__PURE__*/_jsx(\"div\",{id:\"withdrawBack\",children:/*#__PURE__*/_jsx(\"div\",{id:\"withdrawCard\",children:/*#__PURE__*/_jsx(Card,{backgroundColor:\"info\",header:\"Withdraw Funds\",status:status,body:show?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h5\",{children:[\"Hello \",ctx.users[lastUser].name,\",\"]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Account Balance = $ \",ctx.users[lastUser].balance]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"input\",className:\"form-control\",id:\"withdraw\",placeholder:\"Enter amount\",value:withdraw,onChange:function onChange(e){return setWithdraw(e.currentTarget.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-light\",disabled:withdraw===0||withdraw===''?true:false,onClick:makeWithdrawal,children:\"Withdraw\"}),\" \",/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h6\",{children:[\"New Balance = $ \",balance]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Transaction successful!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-light\",onClick:clearForm,children:\"Withdraw More...\"}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})})})});}export default Withdraw;","map":{"version":3,"names":["React","useContext","useState","Card","UserContext","Withdraw","withdraw","setWithdraw","status","setStatus","show","setShow","ctx","lastUser","users","length","balance","parseInt","validate","field","label","isNaN","setTimeout","makeWithdrawal","newAmount","deductedFunds","name","submissions","push","clearForm","console","log","e","currentTarget","value"],"sources":["/Users/maxleach/Documents/GitHub/bad-bank/src/withdraw.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\nimport {Card, UserContext} from './context';\nimport './app.css';\n\nfunction Withdraw(){\n    const [withdraw, setWithdraw] = useState('');\n    const [status, setStatus] = useState('');\n    const [show, setShow] = useState(true);\n  \n    const ctx = useContext(UserContext);\n   \n    let lastUser = ctx.users.length -1;\n    let balance = parseInt(ctx.users[lastUser].balance);\n  \n    function validate(field, label){\n      if (isNaN(withdraw) || withdraw === \" \") {\n        setStatus('Error: ' + label);\n        setTimeout(() => setStatus(''),3000);\n        return false;\n      }     if (withdraw < 0) {\n        setStatus('Error: Negative Number');\n        setTimeout(() => setStatus(''),3000);\n        return false;\n      } if (withdraw > balance) {\n        setStatus('Error: Insufficient Funds');\n        setTimeout(() => setStatus(''),3000);\n        return false;\n      }\n      return true;\n  }\n  \n    function makeWithdrawal () {\n      if (!validate(withdraw, 'Number Required'))     \n      return;\n\n      let newAmount = balance - parseInt(withdraw);\n      let deductedFunds = `${ctx.users[lastUser].name} withdrew: ${withdraw}`\n      setShow(false)\n      return ( ctx.users[lastUser].balance = newAmount, ctx.submissions.push(deductedFunds)\n      )\n    }\n  \n    function clearForm(){\n      setWithdraw(0);\n      setShow(true);\n      console.log(ctx)\n    }\n  \n    return (\n      <div id=\"withdrawBack\">\n        <div id=\"withdrawCard\"> \n          <Card\n          backgroundColor=\"info\"\n          header=\"Withdraw Funds\"\n          status={status}\n          body= {show ? (\n            <>\n            <h5>Hello {ctx.users[lastUser].name},</h5>\n            <h6>Account Balance = $ {ctx.users[lastUser].balance}</h6><br/>\n            <input type=\"input\" className=\"form-control\" id=\"withdraw\" placeholder=\"Enter amount\" value={withdraw} onChange={e => setWithdraw(e.currentTarget.value)} /> <br/>\n            \n            <button type=\"submit\" className=\"btn btn-light\" disabled={withdraw === 0 || withdraw === ''? true : false} onClick={makeWithdrawal}>Withdraw</button> <br/>\n            </> ) : (<> \n            <h6>New Balance = $ {balance}</h6> <br/>\n            <p>Transaction successful!</p>\n            <button type=\"submit\" className=\"btn btn-light\"  onClick={clearForm}>Withdraw More...</button> <br/>\n            </>\n            )\n          }\n          />\n        </div>\n      </div>\n      )\n  }\n\n  export default Withdraw;"],"mappings":"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"},"metadata":{},"sourceType":"module"}